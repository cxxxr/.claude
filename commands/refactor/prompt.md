---
description: 既存のMarkdownプロンプトをベストプラクティスに基づいてリファクタリング
argument-hint: "<file-path>"
---

# Markdownプロンプト リファクタリング

対象ファイル: $ARGUMENTS

## 目的

既存のプロンプトを以下の観点で改善する：
- 明確性と再現性の向上
- 冗長な記述の削減
- 構造の一貫性確保
- LLMが従いやすい形式への変換

## 分析フェーズ

### 1. 現状評価

対象ファイルを読み込み、以下を評価：

| 観点 | チェック項目 |
|------|-------------|
| 構造 | フロントマターの有無・適切性 |
| 明確性 | 曖昧な指示がないか |
| 簡潔性 | 冗長な説明がないか |
| 実行可能性 | 具体的なアクションが定義されているか |
| 完結性 | 必要な情報がすべて含まれているか |

### 2. 問題の特定

よくある問題パターン：

```
❌ 曖昧な指示: 「適切に処理してください」
✅ 具体的な指示: 「JSONとしてパースし、"id"フィールドを抽出」

❌ 冗長な説明: 背景説明が長すぎる
✅ 簡潔な説明: 要点のみを箇条書き

❌ 暗黙の前提: 読み手が知っていると仮定
✅ 明示的な前提: 前提条件を明記

❌ 散漫な構造: 関連する情報が分散
✅ 論理的な構造: 情報をグループ化
```

## リファクタリング原則

### 原則1: 構造の標準化

**フロントマター（YAML）**
```yaml
---
# 必須
description: 1行で目的を説明
# 種類に応じて追加
argument-hint: "<arg-name>"      # コマンドの場合
allowed-tools: Tool1, Tool2      # スキルの場合
tools: Tool1, Tool2              # エージェントの場合
model: opus|sonnet|haiku         # エージェントの場合
---
```

**本文構成**
1. 概要（1-2文）
2. 入力/引数の説明
3. 手順（番号付きリスト）
4. 出力形式
5. 例（必要に応じて）

### 原則2: 指示の具体化

```
Before: 「エラーを適切に処理する」
After:  「エラー発生時は以下を実行:
         1. エラーメッセージをログ出力
         2. ユーザーに簡潔なエラー内容を通知
         3. 処理を中断せず次の項目へ進む」
```

### 原則3: 冗長性の除去

- 同じ情報の繰り返しを削除
- 自明な説明を省略
- 長い段落を箇条書きに変換
- 装飾的な表現を除去

### 原則4: アクショナブルな記述

```
Before: 「ファイルの内容を確認することが重要です」
After:  「ファイルを読み込み、以下を確認:
         - [ ] 構文エラーがないこと
         - [ ] 必須フィールドが存在すること」
```

### 原則5: 例による補強

抽象的な指示には具体例を追加：

```markdown
## フォーマット

入力:
```text
[実際の入力例]
```

出力:
```text
[期待される出力例]
```
```

## 出力

### リファクタリング後のファイル

改善したプロンプトを同じファイルに上書き保存。

### 変更サマリー

```markdown
## 変更点

### 構造
- [変更内容]

### 明確性
- [変更内容]

### 削減
- [削除した冗長部分]

### 追加
- [追加した明確化・例]
```

## チェックリスト

リファクタリング完了前の最終確認：

- [ ] フロントマターが標準形式に従っている
- [ ] すべての指示が具体的でアクショナブル
- [ ] 冗長な説明が除去されている
- [ ] 必要な例が含まれている
- [ ] 論理的な順序で構成されている
- [ ] プレースホルダー（$ARGUMENTS等）が正しく使用されている
